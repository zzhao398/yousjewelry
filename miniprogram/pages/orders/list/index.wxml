<!-- pages/orders/list/index.wxml -->

<view class="page">

<!-- È°∂ÈÉ® Tab -->
<view class="tabs">
  <view
    class="tab-item {{tab==='all'?'active':''}}"
    data-tab="all"
    bindtap="onTabChange"
  >{{tOrdersList.tab_all}}</view>

  <view
    class="tab-item {{tab==='pending'?'active':''}}"
    data-tab="pending"
    bindtap="onTabChange"
  >{{tOrdersList.tab_pending}}</view>

  <view
    class="tab-item {{tab==='unshipped'?'active':''}}"
    data-tab="unshipped"
    bindtap="onTabChange"
  >{{tOrdersList.tab_unshipped}}</view>

  <view
    class="tab-item {{tab==='unpaid'?'active':''}}"
    data-tab="unpaid"
    bindtap="onTabChange"
  >{{tOrdersList.tab_unpaid}}</view>

  <view
    class="tab-item {{tab==='paid'?'active':''}}"
    data-tab="paid"
    bindtap="onTabChange"
  >{{tOrdersList.tab_paid}}</view>

  <view
    class="tab-item {{tab==='shipped'?'active':''}}"
    data-tab="shipped"
    bindtap="onTabChange"
  >{{tOrdersList.tab_shipped}}</view>
</view>

<!-- ÊêúÁ¥¢Ê†è -->
<view class="search-bar">
  <!-- ÊêúÁ¥¢ÂõæÊ†á‰πüÂèØ‰ª•ÁÇπÔºåÁ≠â‰ª∑‰∫é‚ÄúÊêúÁ¥¢Á°ÆËÆ§‚Äù -->
  <view
    class="search-icon"
    bindtap="onSearchConfirm"
  >üîç</view>

  <input
    class="search-input"
    placeholder="{{tOrdersList.search_placeholder}}"
    confirm-type="search"
    value="{{keyword}}"
    bindinput="onKeywordInput"
    bindconfirm="onSearchConfirm"
  />

  <view
    class="search-clear"
    wx:if="{{keyword}}"
    bindtap="onSearchClear"
  >√ó</view>
</view>

<!-- ÂàóË°®Âå∫Âüü -->
<scroll-view
  class="list-scroll"
  scroll-y="true"
  enable-back-to-top="true"
>
  <!-- Á©∫Áä∂ÊÄÅ -->
  <block wx:if="{{!list.length && !loading}}">
    <view class="empty">
      {{tOrdersList.empty}}
    </view>
  </block>

  <!-- ËÆ¢ÂçïÂàóË°® -->
  <block wx:for="{{list}}" wx:key="oid">
    <view
      class="order-card"
      data-oid="{{item.oid}}"
      bindtap="onOrderTap"
    >
      <!-- ËÆ¢ÂçïÂè∑ -->
      <view class="row row-id">
        <text class="order-id">{{item.oid}}</text>
      </view>

      <!-- ÈáëÈ¢ù -->
      <view class="row row-amount">
        <text class="amount-text">{{item.displayAmount}}</text>
      </view>

      <!-- ÈÇÆÁÆ±Ôºà‰ªÖÁÆ°ÁêÜÂëòÂèØËßÅÔºâ -->
      <view class="row row-email" wx:if="{{role==='admin'}}">
        <text class="email-text">{{item.customerEmail}}</text>
      </view>

      <!-- Áä∂ÊÄÅÊ†áÁ≠æ -->
      <view class="row row-tags">
        <view class="tag {{item.shippingTagClass}}">
          {{item.shippingStatusLabel}}
        </view>
        <view class="tag {{item.payTagClass}}">
          {{item.payStatusLabel}}
        </view>
      </view>
    </view>
  </block>

  <!-- Âä†ËΩΩ‰∏≠ -->
  <view class="list-footer" wx:if="{{loading}}">
    {{tOrdersList.loading}}
  </view>

  <!-- Ê≤°ÊúâÊõ¥Â§ö -->
  <view class="list-footer" wx:if="{{finished && list.length}}">
    {{tOrdersList.no_more}}
  </view>

</scroll-view>
</view>
