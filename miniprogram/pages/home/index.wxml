<view class="page">

  <!-- é¡¶éƒ¨æ ‡é¢˜åŒºåŸŸï¼ˆä¸»æ’­ & ç®¡ç†å‘˜å…±ç”¨ï¼‰ -->
  <view class="section-header">
    <text class="section-title">ä¸»æ’­æ¦‚å†µ</text>
    <text class="section-subtitle">æ¬¢è¿å›æ¥ï¼Œ{{displayName || 'ç”¨æˆ·'}}</text>
  </view>

  <!-- å¾…å‘è´§å¡ç‰‡ -->
  <view class="card card-pending">
    <view class="card-row">
      <view class="card-left">
        <text class="icon-clock">ğŸ•’</text>
        <text class="card-label">å¾…å‘è´§</text>
      </view>
      <text class="card-number">{{toShipCount}}</text>
    </view>
  </view>

  <!-- æ¦‚å†µå¡ç‰‡ï¼ˆä»Šå¤©ï¼‰ -->
  <view class="card card-summary">

    <!-- å¡ç‰‡å¤´éƒ¨ -->
    <view class="card-header-row">
      <text class="card-label">æ¦‚å†µ</text>
      <view class="tag-today">ä»Šå¤©</view>
    </view>

    <!-- ä¸» GMV å±…ä¸­æ˜¾ç¤º -->
    <view class="summary-main-center">
      <text class="summary-amount">$ {{gmv}}</text>
    </view>

    <!-- ä¸‹æ–¹æŒ‡æ ‡ -->
    <view class="summary-metrics">
      <view class="metric">
        <text class="metric-number">{{orderCount}}</text>
        <text class="metric-label">ä»Šæ—¥è®¢å•</text>
      </view>
      <view class="metric">
        <text class="metric-number">{{gmv}}</text>
        <text class="metric-label">ä»Šæ—¥ GMV</text>
      </view>
      <view class="metric">
        <text class="metric-number">{{toShipCount}}</text>
        <text class="metric-label">å¾…å‘è´§</text>
      </view>
    </view>

  </view>

  <!-- ========================= -->
  <!-- ä»¥ä¸‹æ˜¯ã€Œç®¡ç†å‘˜å¯è§ã€çš„éƒ¨åˆ† -->
  <!-- ========================= -->

  <!-- è¶‹åŠ¿ + æ—¶é—´èŒƒå›´åˆ‡æ¢ -->
  <view wx:if="{{isAdmin}}">
    <view class="section-header">
      <text class="section-title">
        è¿‘
        {{ range === '7d' ? '7 å¤©' : (range === '30d' ? '30 å¤©' : (range === '1y' ? '1 å¹´' : 'å…¨éƒ¨')) }}
        è¶‹åŠ¿
      </text>
      <text class="section-subtitle">è®¢å•æ•° &amp; GMVï¼ˆæŒ‰å¤©ï¼‰</text>
    </view>

    <!-- æ—¶é—´èŒƒå›´ tabs -->
    <view class="range-tabs">
      <view
        class="range-tab {{range === '7d' ? 'active' : ''}}"
        data-range="7d"
        bindtap="onRangeChange"
      >7å¤©</view>

      <view
        class="range-tab {{range === '30d' ? 'active' : ''}}"
        data-range="30d"
        bindtap="onRangeChange"
      >30å¤©</view>

      <view
        class="range-tab {{range === '1y' ? 'active' : ''}}"
        data-range="1y"
        bindtap="onRangeChange"
      >1å¹´</view>

      <view
        class="range-tab {{range === 'all' ? 'active' : ''}}"
        data-range="all"
        bindtap="onRangeChange"
      >å…¨éƒ¨</view>
    </view>

    <view class="card card-stats">
      <block wx:if="{{dayStats && dayStats.length}}">
        <view
          class="day-row"
          wx:for="{{dayStats}}"
          wx:key="day"
        >
          <view class="day-left">
            <text class="day-date">{{item.day}}</text>
          </view>
          <view class="day-right">
            <text class="day-orders">è®¢å• {{item.orderCount}}</text>
            <text class="day-gmv">GMV {{item.gmv}}</text>
          </view>
        </view>
      </block>

      <view wx:if="{{!dayStats || !dayStats.length}}" class="empty-text">
        å½“å‰æ—¶é—´èŒƒå›´å†…æ²¡æœ‰è®¢å•æ•°æ®
      </view>
    </view>
  </view>

  <!-- ä¸»æ’­æ¦œå•ï¼ˆæŒ‰ GMV æ’åºï¼Œä½¿ç”¨åŒä¸€æ—¶é—´èŒƒå›´ï¼‰ -->
  <view wx:if="{{isAdmin}}">
    <view class="section-header">
      <text class="section-title">ä¸»æ’­æ¦œå•</text>
      <text class="section-subtitle">
        æŒ‰ GMV æ’åºï¼ˆå½“å‰æ—¶é—´èŒƒå›´ï¼‰
      </text>
    </view>

    <view class="card card-stats">
      <block wx:if="{{anchorStats && anchorStats.length}}">
        <view
          class="anchor-row"
          wx:for="{{anchorStats}}"
          wx:key="anchorId"
        >
          <view class="anchor-left">
            <text class="anchor-rank">{{index + 1}}</text>
            <text class="anchor-id">{{item.anchorId}}</text>
          </view>
          <view class="anchor-right">
            <text class="anchor-gmv">GMV {{item.gmv}}</text>
            <text class="anchor-orders">è®¢å• {{item.orderCount}}</text>
          </view>
        </view>
      </block>

      <view wx:if="{{!anchorStats || !anchorStats.length}}" class="empty-text">
        å½“å‰æ—¶é—´èŒƒå›´å†…æš‚æ— ä¸»æ’­æ•°æ®
      </view>
    </view>
  </view>

</view>
